/* 
Procedimiento para insertar una nueva categoría de servicio.
Parámetros de entrada el Nombre y la Descripción. Id autoincremental.
Parámetro de salida el estado del procedimiento.
*/

CREATE PROCEDURE `sp_categoriaservicioINS`(
    _Nombre varchar(20),
    _Descripcion varchar(200),
    OUT estado tinyint
)
BEGIN
	IF (SELECT COUNT(Descripcion) FROM tbl_categoriaservicio
		WHERE Descripcion=_Descripcion) = 1 THEN
        	SELECT 0 INTO estado;
	ELSE
		INSERT INTO tbl_categoriaservicio (Nombre, Descripcion)
        	VALUES (_Nombre, _Descripcion);
        	SELECT 1 INTO estado;
	END IF;
END
