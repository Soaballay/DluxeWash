/* 
Procedimiento para insertar una nueva categorái de servicio.
Verifica que el Nombre ya no exista en la BBDD y luego inserta.
Parámetro de salida el estado del procedimiento.
*/

CREATE PROCEDURE `sp_categoriaservicioINS`(
    _Nombre varchar(20),
    _Descripcion varchar(200),
    OUT estado tinyint
)
BEGIN
	IF (SELECT COUNT(Nombre) FROM tbl_categoriaservicio
		WHERE Nombre=_Nombre) = 1 THEN
        	SELECT 0 INTO estado;
	ELSE
		INSERT INTO tbl_categoriaservicio (Nombre, Descripcion)
        	VALUES (_Nombre, _Descripcion);
        	SELECT 1 INTO estado;
	END IF;
END
